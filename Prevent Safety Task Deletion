Prevent Safety Task Deletion
Completed
Grandma Kelly is concerned that someone might accidentally delete critical safety tasks for Baby Shaya! She wants to make sure that any Village Task marked as safety-critical cannot be deleted unless it's already been completed.

Before You Begin
Create a record-triggered automation that prevents deletion of incomplete safety-critical Village Tasks.

Requirements
Trigger Event: Before a Village Task is deleted
Conditions: Is Baby Safety Critical = true AND Status != 'Completed'
Action: Prevent the deletion and display an error message
Error Message: "Cannot delete safety-critical tasks that are not completed. Please complete the task first or contact your administrator."
Examples
Example 1:

Attempt to Delete: Village Task with Is Baby Safety Critical = true, Status = 'Not Started'
Result: Deletion is blocked with error message
Example 2:

Attempt to Delete: Village Task with Is Baby Safety Critical = true, Status = 'Completed'
Result: Deletion is allowed (task is deleted successfully)
Example 3:

Attempt to Delete: Village Task with Is Baby Safety Critical = false, Status = 'Not Started'
Result: Deletion is allowed (task is deleted successfully)
Example 4:

Attempt to Delete: 3 Village Tasks in bulk, where 1 is safety-critical and incomplete
Result: Entire operation is blocked with error message
Notes
Use a Before Delete trigger to validate before the record is removed
Use addError() method to display the error message and prevent deletion
A task can only be deleted if it's EITHER not safety-critical OR already completed
Handle bulk delete operations properly
The exact error message text must match the requirement above
\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>65.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <customErrors>
        <name>Error_Message</name>
        <label>Error Message</label>
        <locationX>0</locationX>
        <locationY>0</locationY>
        <customErrorMessages>
            <errorMessage>Cannot delete safety-critical tasks that are not completed. Please complete the task first or contact your administrator.</errorMessage>
            <isFieldError>false</isFieldError>
        </customErrorMessages>
    </customErrors>
    <environments>Default</environments>
    <interviewLabel>Day 3- Prevent Safety Task Deletion {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Day 3- Prevent Safety Task Deletion</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <start>
        <locationX>0</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Error_Message</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>CAMPX__Is_Baby_Safety_Critical__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>CAMPX__Status__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </filters>
        <object>CAMPX__Village_Task__c</object>
        <recordTriggerType>Delete</recordTriggerType>
        <triggerType>RecordBeforeDelete</triggerType>
    </start>
    <status>Active</status>
</Flow>
